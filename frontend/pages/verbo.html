<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APPSHC - verbo</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: Arial;
            font-weight: 400;
            letter-spacing: 1px;
        }

        body {
            background-color: #273142;
        }

        section {
            max-width: fit-content;
            padding-inline: 2rem;
            height: 100vh;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            color: #fff;
            font-size: 46px;
            margin-bottom: 4rem;
        }

        p {
            color: #fff;
            font-size: 20px;
        }

        span {
            color: #227298;
        }

        .exibidor {
            background-color: #e1e1e1;
            max-width: 1800px;
            display: flex;
            gap: 1rem;
            padding: 2rem;
            border-radius: 15px;
        }

        .subExibidor {
            background-color: #227298;
            border-radius: 9px;
            width: 260px;
            padding-inline: 2rem;
            padding-block: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .palavras-conjunto {
            border-radius: 9px;
            display: flex;
            gap: 1.2rem;
            width: 99vmax;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 4rem;
        }

        .palavra {
            background-color: #227298;
            border-radius: 9px;
            width: 250px;
            padding-inline: 2rem;
            padding-block: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .pular {
            background-color: #171717;
            border-radius: 9px;
            width: 250px;
            padding-inline: 2rem;
            padding-block: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .selecionado {
            box-shadow: 0px 0px 15px 4.5px #2CFFE6;
            transition: 0.3s ease;
            transform: scale(1.03);
        }

        .container1 {
            display: flex;
            gap: 1rem;
        }

        .container2 {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
    </style>

    <script>
        const total = 36;
        const itensPorColuna = 5;
        let index = 1;
        let timer = null;
        let subTimer = null;
        let piscada = false;

        const conjugacoes = {
            2: ["Ser / √©", "Foi", "Ser√°"],
            3: ["Estar / est√°", "Esteve", "Estar√°"],
            4: ["Ter / tem", "Teve", "Ter√°"],
            5: ["Comer / come", "Comeu", "Comer√°"],
            7: ["Beber / bebe", "Bebeu", "Beber√°"],
            8: ["Dormir / dorme", "Dormiu", "Dormir√°"],
            9: ["Amar / ama", "Amou", "Amar√°"],
            10: ["Gostar / gosta", "Gostou", "Gostar√°"],
            12: ["Trabalhar / trabalha", "Trabalhou", "Trabalhar√°"],
            13: ["Ir / vai", "Foi", "Ir√°"],
            14: ["Vir / vem", "Veio", "Vir√°"],
            15: ["Fazer / faz", "Fez", "Far√°"],
            17: ["Dar / d√°", "Deu", "Dar√°"],
            18: ["Dizer / diz", "Disse", "Dir√°"],
            19: ["Falar / fala", "Falou", "Falar√°"],
            20: ["Ver / v√™", "Viu", "Ver√°"],
            22: ["Ouvir / ouve", "Ouviu", "Ouvir√°"],
            23: ["Saber / sabe", "Soube", "Saber√°"],
            24: ["Querer / quer", "Quis", "Querer√°"],
            25: ["Come√ßar / come√ßa", "Come√ßou", "Come√ßar√°"],
            27: ["Terminar / termina", "Terminou", "Terminar√°"],
            28: ["Sentir / sente", "Sentiu", "Sentir√°"],
            29: ["Precisar / precisa", "Precisou", "Precisar√°"],
            30: ["Voltar / volta", "Voltou", "Voltar√°"],
            31: ["Entender / entende", "Entendeu", "Entender√°"],
            32: ["Ler / l√™", "Leu", "Ler√°"],
            33: ["Escrever / escreve", "Escreveu", "Escrever√°"],
            34: ["P√¥r / p√µe", "P√¥s", "Por√°"],
            35: ["Levar / leva", "Levou", "Levar√°"]
        };

        function limparDestaques() {
            for (let i = 1; i <= total; i++) {
                const p = document.getElementById(`p${i}`);
                if (p) p.classList.remove("selecionado");
            }
        }

        function gotoIndex(novo) {
            index = novo;
            if (index < 1) index = 1;
            if (index > total) index = 1;
            limparDestaques();
            const atual = document.getElementById(`p${index}`);
            if (atual) atual.classList.add("selecionado");
        }

        function startCarousel() {
            if (timer) clearInterval(timer);
            timer = setInterval(() => {
                if (conjugacoes[index]) {
                    clearInterval(timer);
                    variarVerbo(index, conjugacoes[index], index + 1);
                    return;
                }
                gotoIndex(index);
                index++;
                if (index > total) index = 1;
            }, 4000);
        }

        function variarVerbo(slotIndex, formas, proximoIndex) {
            let pos = 0;
            const pEl = document.querySelector(`#p${slotIndex} p`);
            gotoIndex(slotIndex);
            pEl.textContent = formas[pos];

            subTimer = setInterval(() => {
                pos++;
                if (pos >= formas.length) {
                    clearInterval(subTimer);
                    index = proximoIndex;
                    startCarousel();
                    return;
                }
                pEl.textContent = formas[pos];
            }, 4000);
        }

        function obterPalavraSelecionada() {
            const box = document.querySelector('.palavra.selecionado');
            if (!box) return null;
            if (box.classList.contains('pular')) return null;
            const p = box.querySelector('p');
            const texto = p ? p.textContent.trim() : '';
            return texto || null;
        }

        function tentarAdicionar() {
            if (!piscada) return;
            const texto = obterPalavraSelecionada();
            if (texto) {
                let lista = JSON.parse(localStorage.getItem('palavrasSelecionadas') || '[]');
                lista.push(texto);
                localStorage.setItem('palavrasSelecionadas', JSON.stringify(lista));
                window.location.href = '../index.html';
            }
            piscada = false;
            startCarousel();
        }

        // üî• Fun√ß√£o global para piscada
        window.handleTrigger = function () {
            const selecionada = document.querySelector('.palavra.selecionado');
            if (!selecionada) return;

            const id = selecionada.id || '';
            const num = parseInt(id.replace(/^p/, ''), 10);
            if (!Number.isFinite(num)) return;

            if (timer) clearInterval(timer);
            if (subTimer) clearInterval(subTimer);

            if (selecionada.classList.contains('pular')) {
                const colAtual = Math.floor((num - 1) / itensPorColuna);
                const totalColunas = Math.ceil(total / itensPorColuna);
                const proxCol = (colAtual + 1) % totalColunas;
                let novoIndex = proxCol * itensPorColuna + 1;
                if (novoIndex > total) novoIndex = 1;
                gotoIndex(novoIndex);
                startCarousel();
                return;
            }

            piscada = true;
            tentarAdicionar();
        };

        document.addEventListener('DOMContentLoaded', () => {
            gotoIndex(1);
            startCarousel();

            // bot√£o tamb√©m chama handleTrigger
            const btn = document.getElementById('btn-piscada') || document.querySelector('button');
            if (btn) {
                btn.addEventListener('click', window.handleTrigger);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            if (!sessionStorage.getItem('sessaoAtiva')) {
                localStorage.removeItem('palavrasSelecionadas');
                sessionStorage.setItem('sessaoAtiva', 'true');
            }

            let lista = JSON.parse(localStorage.getItem('palavrasSelecionadas') || '[]');
            if (lista.length > 0) {
                const exibidores = document.querySelectorAll('.exibidor .subExibidor p');
                let i = 0;
                for (let slot of exibidores) {
                    if (i >= lista.length) break;
                    slot.textContent = lista[i];
                    i++;
                }
            }
        });
    </script>

</head>

<body>
    <section>
        <h1>Pisque por <span>2 segundos</span> para adicionar √† frase</h1>

        <div class="palavras-conjunto">

            <div class="container1">
                <div class="container2">
                    <div class="palavra pular" id="p1">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p2">
                        <p>Ser / √©</p>
                    </div>
                    <div class="palavra" id="p3">
                        <p>Estar / est√°</p>
                    </div>
                    <div class="palavra" id="p4">
                        <p>Ter / tem</p>
                    </div>
                    <div class="palavra" id="p5">
                        <p>Comer / come</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p6">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p7">
                        <p>Beber / bebe</p>
                    </div>
                    <div class="palavra" id="p8">
                        <p>Dormir / dorme</p>
                    </div>
                    <div class="palavra" id="p9">
                        <p>Amar / ama</p>
                    </div>
                    <div class="palavra" id="p10">
                        <p>Gostar / gosta</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p11">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p12">
                        <p>Trabalhar/ trabalha</p>
                    </div>
                    <div class="palavra" id="p13">
                        <p>Ir / vai</p>
                    </div>
                    <div class="palavra" id="p14">
                        <p>Vir / vem</p>
                    </div>
                    <div class="palavra" id="p15">
                        <p>Fazer / faz</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p16">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p17">
                        <p>Dar / d√°</p>
                    </div>
                    <div class="palavra" id="p18">
                        <p>Dizer / diz</p>
                    </div>
                    <div class="palavra" id="p19">
                        <p>Falar / fala</p>
                    </div>
                    <div class="palavra" id="p20">
                        <p>Ver / v√™</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p21">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p22">
                        <p>Ouvir / ouve</p>
                    </div>
                    <div class="palavra" id="p23">
                        <p>Saber / sabe</p>
                    </div>
                    <div class="palavra" id="p24">
                        <p>Querer / quer</p>
                    </div>
                    <div class="palavra" id="p25">
                        <p>Come√ßar / come√ßa</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p26">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p27">
                        <p>Terminar / termina</p>
                    </div>
                    <div class="palavra" id="p28">
                        <p>Sentir / sente</p>
                    </div>
                    <div class="palavra" id="p29">
                        <p>Precisar / precisa</p>
                    </div>
                    <div class="palavra" id="p30">
                        <p>Voltar / volta</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra" id="p31">
                        <p>Entender / entende</p>
                    </div>
                    <div class="palavra" id="p32">
                        <p>Ler / l√™</p>
                    </div>
                    <div class="palavra" id="p33">
                        <p>Escrever / escreve</p>
                    </div>
                    <div class="palavra" id="p34">
                        <p>P√¥r / p√µe</p>
                    </div>
                    <div class="palavra" id="p35">
                        <p>Levar / leva</p>
                    </div>
                </div>
            </div>

        </div>

        <div class="exibidor">

            <div class="subExibidor" id="e1">
                <p></p>
            </div>
            <div class="subExibidor" id="e2">
                <p></p>
            </div>
            <div class="subExibidor" id="e3">
                <p></p>
            </div>
            <div class="subExibidor" id="e4">
                <p></p>
            </div>
            <div class="subExibidor" id="e5">
                <p></p>
            </div>
            <div class="subExibidor" id="e6">
                <p></p>
            </div>

        </div>
        <button>piscada</button>
    </section>
    <script src="../script.js"></script>
</body>

</html>