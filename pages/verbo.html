<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APPSHC - verbo</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            font-family: Arial;
            font-weight: 400;
            letter-spacing: 1px;
        }

        body {
            background-color: #273142;
        }

        section {
            max-width: fit-content;
            padding-inline: 2rem;
            height: 100vh;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        h1 {
            color: #fff;
            font-size: 46px;
            margin-bottom: 4rem;
        }

        p {
            color: #fff;
            font-size: 20px;
        }

        span {
            color: #227298;
        }

        .exibidor {
            background-color: #e1e1e1;
            max-width: 1800px;
            display: flex;
            gap: 1rem;
            padding: 2rem;
            border-radius: 15px;
        }

        .subExibidor {
            background-color: #227298;
            border-radius: 9px;
            width: 260px;
            padding-inline: 2rem;
            padding-block: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .palavras-conjunto {
            border-radius: 9px;
            display: flex;
            gap: 1.2rem;
            width: 99vmax;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 4rem;
        }

        .palavra {
            background-color: #227298;
            border-radius: 9px;
            width: 250px;
            padding-inline: 2rem;
            padding-block: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .pular {
            background-color: #171717;
            border-radius: 9px;
            width: 250px;
            padding-inline: 2rem;
            padding-block: 1.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .selecionado {
            box-shadow: 0px 0px 6px 5px #2CFFE6;
            transition: 0.3s ease;
        }

        .container1 {
            display: flex;
            gap: 1rem;
        }

        .container2 {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
    </style>

    <script>
        const total = 36;
        const itensPorColuna = 5;
        let index = 1;
        let timer = null;

        function limparDestaques() {
            for (let i = 1; i <= total; i++) {
                const p = document.getElementById(`p${i}`);
                if (p) p.classList.remove("selecionado");
            }
        }

        function gotoIndex(novo) {
            index = novo;
            if (index < 1) index = 1;
            if (index > total) index = 1;
            limparDestaques();
            const atual = document.getElementById(`p${index}`);
            if (atual) atual.classList.add("selecionado");
        }

        function startCarousel() {
            if (timer) clearInterval(timer);
            timer = setInterval(() => {
                gotoIndex(index);
                index++;
                if (index > total) index = 1;
            }, 3400);
        }

        document.addEventListener('DOMContentLoaded', () => {
            gotoIndex(1);
            startCarousel();

            let piscada = false;

            const btn = document.getElementById('btn-piscada') || document.querySelector('button');
            if (!btn) return;

            btn.addEventListener('click', () => {
                const selecionada = document.querySelector('.palavra.selecionado');
                if (!selecionada) return;

                const id = selecionada.id || '';
                const num = parseInt(id.replace(/^p/, ''), 10);
                if (!Number.isFinite(num)) return;

                if (timer) clearInterval(timer);

                if (selecionada.classList.contains('pular')) {
                    const colAtual = Math.floor((num - 1) / itensPorColuna);
                    const totalColunas = Math.ceil(total / itensPorColuna);
                    const proxCol = (colAtual + 1) % totalColunas;
                    let novoIndex = proxCol * itensPorColuna + 1;
                    if (novoIndex > total) novoIndex = 1;
                    gotoIndex(novoIndex);
                    startCarousel();
                    return;
                }

                piscada = true;
                tentarAdicionar();
            });

            function obterPalavraSelecionada() {
                const box = document.querySelector('.palavra.selecionado');
                if (!box) return null;
                if (box.classList.contains('pular')) return null;
                const p = box.querySelector('p');
                const texto = p ? p.textContent.trim() : '';
                return texto || null;
            }

            function tentarAdicionar() {
                if (!piscada) return;
                const texto = obterPalavraSelecionada();
                if (texto) {
                    let lista = JSON.parse(localStorage.getItem('palavrasSelecionadas') || '[]');
                    lista.push(texto);
                    localStorage.setItem('palavrasSelecionadas', JSON.stringify(lista));
                    window.location.href = '../index.html';
                }
                piscada = false;
                startCarousel();
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            if (!sessionStorage.getItem('sessaoAtiva')) {
                localStorage.removeItem('palavrasSelecionadas');
                sessionStorage.setItem('sessaoAtiva', 'true');
            }

            let lista = JSON.parse(localStorage.getItem('palavrasSelecionadas') || '[]');
            if (lista.length > 0) {
                const exibidores = document.querySelectorAll('.exibidor .subExibidor p');
                let i = 0;
                for (let slot of exibidores) {
                    if (i >= lista.length) break;
                    slot.textContent = lista[i];
                    i++;
                }
            }
        });

    </script>

</head>

<body>
    <section>
        <h1>Pisque por <span>2 segundos</span> para adicionar à frase</h1>

        <div class="palavras-conjunto">

            <div class="container1">
                <div class="container2">
                    <div class="palavra pular" id="p1">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p2">
                        <p>Ser / é</p>
                    </div>
                    <div class="palavra" id="p3">
                        <p>Estar</p>
                    </div>
                    <div class="palavra" id="p4">
                        <p>Ter</p>
                    </div>
                    <div class="palavra" id="p5">
                        <p>Comer</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p6">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p7">
                        <p>Beber</p>
                    </div>
                    <div class="palavra" id="p8">
                        <p>Dormir</p>
                    </div>
                    <div class="palavra" id="p9">
                        <p>Amar</p>
                    </div>
                    <div class="palavra" id="p10">
                        <p>Gostar</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p11">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p12">
                        <p>Trabalhar</p>
                    </div>
                    <div class="palavra" id="p13">
                        <p>Ir</p>
                    </div>
                    <div class="palavra" id="p14">
                        <p>Vir</p>
                    </div>
                    <div class="palavra" id="p15">
                        <p>Fazer</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p16">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p17">
                        <p>Dar</p>
                    </div>
                    <div class="palavra" id="p18">
                        <p>Dizer</p>
                    </div>
                    <div class="palavra" id="p19">
                        <p>Falar</p>
                    </div>
                    <div class="palavra" id="p20">
                        <p>Ver</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p21">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p22">
                        <p>Ouvir</p>
                    </div>
                    <div class="palavra" id="p23">
                        <p>Saber</p>
                    </div>
                    <div class="palavra" id="p24">
                        <p>Querer</p>
                    </div>
                    <div class="palavra" id="p25">
                        <p>Começar</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra pular" id="p26">
                        <p>>> Pular >></p>
                    </div>
                    <div class="palavra" id="p28">
                        <p>Terminar</p>
                    </div>
                    <div class="palavra" id="p29">
                        <p>Sentir</p>
                    </div>
                    <div class="palavra" id="p30">
                        <p>Precisar</p>
                    </div>
                    <div class="palavra" id="p31">
                        <p>Voltar</p>
                    </div>
                </div>
                <div class="container2">
                    <div class="palavra" id="p32">
                        <p>Entender</p>
                    </div>
                    <div class="palavra" id="p33">
                        <p>Ler</p>
                    </div>
                    <div class="palavra" id="p34">
                        <p>Escrever</p>
                    </div>
                    <div class="palavra" id="p35">
                        <p>Pôr</p>
                    </div>
                    <div class="palavra" id="p36">
                        <p>Levar</p>
                    </div>
                </div>
            </div>

        </div>

        <div class="exibidor">

            <div class="subExibidor" id="e1">
                <p></p>
            </div>
            <div class="subExibidor" id="e2">
                <p></p>
            </div>
            <div class="subExibidor" id="e3">
                <p></p>
            </div>
            <div class="subExibidor" id="e4">
                <p></p>
            </div>
            <div class="subExibidor" id="e5">
                <p></p>
            </div>
            <div class="subExibidor" id="e6">
                <p></p>
            </div>

        </div>
        <button>piscada</button>

    </section>
</body>

</html>